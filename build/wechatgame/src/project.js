require=function t(e,i,o){function c(s,r){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!r&&a)return a(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return c(i||t)},h,h.exports,t,e,i,o)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<o.length;s++)c(o[s]);return c}({Game:[function(t,e,i){"use strict";cc._RF.push(e,"c4ff2oJr1FGC4oUjZjjuzG5","Game"),cc.Class({extends:cc.Component,properties:{starPrefab:{default:null,type:cc.Prefab},maxStarDuration:0,minStarDuration:0,ground:{default:null,type:cc.Node},player:{default:null,type:cc.Node},scoreDisplay:{default:null,type:cc.Label},scoreAudio:{default:null,url:cc.AudioClip},restartButton:{default:null,type:cc.Node},progressBar:{default:null,type:cc.ProgressBar}},onLoad:function(){this.groundY=this.ground.y+this.ground.height/2,this.timer=0,this.starDuration=0,this.player.getComponent("Player").game=this,this.spawnNewStar(),this.score=0,this.restartButton.setPosition(-4e3,0),this.progressBar.totalLength=cc.director._winSizeInPoints.width,cc.director.resume()},restartNow:function(){cc.director.loadScene("game")},spawnNewStar:function(){var t=cc.instantiate(this.starPrefab);this.node.addChild(t),t.setPosition(this.getNewStarPosition()),t.getComponent("Star").game=this;var e=cc.random0To1()*(this.maxStarDuration-this.minStarDuration);this.starDuration=this.minStarDuration+e,this.timer=0},getNewStarPosition:function(){var t=this.node.width/2,e=cc.randomMinus1To1()*t,i=this.groundY+cc.random0To1()*this.player.getComponent("Player").jumpHeight+50;return cc.p(e,i)},start:function(){},update:function(t){this.timer>this.starDuration?this.gameOver():this.timer+=t},gainScore:function(){this.score+=1,this.scoreDisplay.string="Score: "+this.score.toString(),cc.audioEngine.play(this.scoreAudio,!1,.3)},gameOver:function(){this.player.stopAllActions(),this.restartButton.setPosition(0,0),cc.director.pause()}}),cc._RF.pop()},{}],Ground:[function(t,e,i){"use strict";cc._RF.push(e,"fb929vWN+BGwZbhZoBe0wmT","Ground"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){},start:function(){}}),cc._RF.pop()},{}],JoyStick:[function(t,e,i){"use strict";cc._RF.push(e,"6fc1cxmj0BMDKRdxlUWJ0Wn","JoyStick"),cc.Class({extends:cc.Component,properties:{moveRadius:0},onLoad:function(){this.setTouchListener(),this.originPos=this.node.getPosition(),this.stickSize=this.node.getContentSize(),this.ratio=0,this.stickDistance=0,this.touchLocalX=0,this.touchLocalY=0,this.moveVec=cc.p(0,0),this.stickGo=!1},setTouchListener:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:function(e,i){t.getStickStatus(e),t.touchLocalX<60&&t.touchLocalY<60&&(t.stickGo=!0,t.changeStickStatus())},onTouchesMoved:function(e,i){t.node.setPosition(t.originPos.x,t.originPos.y),t.getStickStatus(e),1==t.stickGo&&t.changeStickStatus()},onTouchesEnded:function(e,i){t.node.setPosition(t.originPos.x,t.originPos.y),t.touchLocalX=0,t.touchLocalY=0,t.stickGo=!1,t.sendEvent()}},t.node)},getStickStatus:function(t){var e=t[0].getLocation(),i=this.node.convertToNodeSpace(e);this.touchLocalX=i.x-this.stickSize.width/2,this.touchLocalY=i.y-this.stickSize.height/2,this.stickDistance=cc.pDistance(cc.p(this.touchLocalX,this.touchLocalY),cc.p(0,0)),this.ratio=this.moveRadius/this.stickDistance},changeStickStatus:function(){this.stickDistance<=this.moveRadius?(this.node.setPositionX(this.originPos.x+this.touchLocalX),this.node.setPositionY(this.originPos.y+this.touchLocalY)):(this.node.setPositionX(this.originPos.x+this.touchLocalX*this.ratio),this.node.setPositionY(this.originPos.y+this.touchLocalY*this.ratio)),this.sendEvent()},sendEvent:function(){this.moveVec=this.returnMyCommands(),this.node.emit("VirtualStick",{moveVector:this.moveVec})},start:function(){},update:function(t){},returnMyCommands:function(){var t=this.touchLocalX*this.ratio,e=this.touchLocalY*this.ratio;return cc.p(t,e)}}),cc._RF.pop()},{}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"ed047WLG2hBQqS5U5CNp17T","Player"),cc.Class({extends:cc.Component,properties:{screenWidth:0,jumpHeight:0,jumpDuration:0,maxMoveSpeed:0,acceleration:0,jumpAudio:{default:null,url:cc.AudioClip},joyStick:{default:null,type:cc.Node}},setJumpAction:function(){var t=cc.p(0,this.jumpHeight),e=cc.p(0,-this.jumpHeight),i=cc.moveBy(this.jumpDuration,t).easing(cc.easeCubicActionOut()),o=cc.moveBy(this.jumpDuration,e).easing(cc.easeCubicActionIn()),c=cc.callFunc(this.playJumpSound,this),n=cc.scaleTo(.03,1,1.1),s=cc.scaleTo(.04,1,.9),r=cc.scaleTo(.03,1,1);return cc.repeatForever(cc.sequence(i,n,r,s,o,s,r,n,c))},playJumpSound:function(){cc.audioEngine.play(this.jumpAudio,!1)},setInputControl:function(){var t=this;this.joyStick.on("VirtualStick",function(e){e.detail.moveVector.x<0?(t.accLeft=!0,t.accRight=!1):e.detail.moveVector.x>0?(t.accLeft=!1,t.accRight=!0):(t.accLeft=!1,t.accRight=!1)})},onLoad:function(){this.node.runAction(this.setJumpAction()),this.accLeft=!1,this.accRight=!1,this.xSpeed=0,this.setInputControl(),cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){var i=t.node.name;"wall-left"!=i&&"wall-right"!=i||(this.xSpeed,this.xSpeed=-this.xSpeed)},start:function(){},update:function(t){this.accLeft?this.xSpeed-=this.acceleration*t:this.accRight&&(this.xSpeed+=this.acceleration*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*t}}),cc._RF.pop()},{}],ProgressBar:[function(t,e,i){"use strict";cc._RF.push(e,"00667VM22dEyof0PQnFtWpa","ProgressBar"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.width=cc.director._winSizeInPoints.width,this.node.setPosition(0,(cc.director._winSizeInPoints.height-this.node.height)/2),this.node.children[0].setPosition(-this.node.width/2,0)},start:function(){}}),cc._RF.pop()},{}],RestartControl:[function(t,e,i){"use strict";cc._RF.push(e,"8d98a59eNVEMZLA8hDCfkyD","RestartControl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.enabled=!1},start:function(){}}),cc._RF.pop()},{}],StartScene:[function(t,e,i){"use strict";cc._RF.push(e,"354a0Ac4c5Nab/rDo1gAjH2","StartScene"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.preloadScene("Scenes/game"),cc.director.pause()},startNow:function(){cc.director.isPaused()&&(cc.director.resume(),cc.director.loadScene("Scenes/game"))},start:function(){},update:function(t){}}),cc._RF.pop()},{}],Star:[function(t,e,i){"use strict";cc._RF.push(e,"648f3/1t6ROkYcvnRj5oGEu","Star"),cc.Class({extends:cc.Component,properties:{pickRadius:0,plusOne:{type:cc.Label,default:null}},onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){this.onPicked()},getPlayerDistance:function(){var t=this.game.player.getPosition();return cc.pDistance(this.node.position,t)},onPicked:function(){this.game.spawnNewStar(),this.game.gainScore(),this.node.destroy()},start:function(){},update:function(t){var e=1-this.game.timer/this.game.starDuration;this.node.opacity=1+Math.floor(254*e),this.game.progressBar.progress=(this.node.opacity-1)/255}}),cc._RF.pop()},{}],WallLeft:[function(t,e,i){"use strict";cc._RF.push(e,"2f875QM9yRLO7mX6c/sLYWj","WallLeft"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.rotation=90,this.node.setPosition(-(cc.winSize.width/2+this.node.height/2),0),cc.director.getCollisionManager().enabled=!0},start:function(){}}),cc._RF.pop()},{}],WallRight:[function(t,e,i){"use strict";cc._RF.push(e,"fa36f7knItEPaqfokbKOVey","WallRight"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.rotation=270,this.node.setPosition(cc.winSize.width/2+this.node.height/2,0),cc.director.getCollisionManager().enabled=!0},start:function(){}}),cc._RF.pop()},{}]},{},["Game","Ground","JoyStick","Player","ProgressBar","RestartControl","Star","StartScene","WallLeft","WallRight"]);