require=function t(i,e,o){function c(s,a){if(!e[s]){if(!i[s]){var r="function"==typeof require&&require;if(!a&&r)return r(s,!0);if(n)return n(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=e[s]={exports:{}};i[s][0].call(u.exports,function(t){var e=i[s][1][t];return c(e||t)},u,u.exports,t,i,e,o)}return e[s].exports}for(var n="function"==typeof require&&require,s=0;s<o.length;s++)c(o[s]);return c}({Game:[function(t,i,e){"use strict";cc._RF.push(i,"c4ff2oJr1FGC4oUjZjjuzG5","Game"),cc.Class({extends:cc.Component,properties:{starPrefab:{default:null,type:cc.Prefab},maxStarDuration:0,minStarDuration:0,ground:{default:null,type:cc.Node},player:{default:null,type:cc.Node},scoreDisplay:{default:null,type:cc.Label},scoreAudio:{default:null,url:cc.AudioClip}},onLoad:function(){this.groundY=this.ground.y+this.ground.height/2,this.timer=0,this.starDuration=0,this.player.getComponent("Player").game=this,this.spawnNewStar(),this.score=0},spawnNewStar:function(){var t=cc.instantiate(this.starPrefab);this.node.addChild(t),t.setPosition(this.getNewStarPosition()),t.getComponent("Star").game=this;var i=cc.random0To1()*(this.maxStarDuration-this.minStarDuration);this.starDuration=this.minStarDuration+i,this.timer=0},getNewStarPosition:function(){var t=this.node.width/2,i=cc.randomMinus1To1()*t,e=this.groundY+cc.random0To1()*this.player.getComponent("Player").jumpHeight+50;return cc.p(i,e)},start:function(){},update:function(t){this.timer>this.starDuration?this.gameOver():this.timer+=t},gainScore:function(){this.score+=1,this.scoreDisplay.string="Score: "+this.score.toString(),cc.audioEngine.play(this.scoreAudio,!1)},gameOver:function(){this.player.stopAllActions(),cc.director.loadScene("game")}}),cc._RF.pop()},{}],JoyStick:[function(t,i,e){"use strict";cc._RF.push(i,"6fc1cxmj0BMDKRdxlUWJ0Wn","JoyStick"),cc.Class({extends:cc.Component,properties:{moveRadius:0},onLoad:function(){this.setTouchListener(),this.originPos=this.node.getPosition(),this.stickSize=this.node.getContentSize(),this.ratio=0,this.stickDistance=0,this.touchLocalX=0,this.touchLocalY=0,this.moveVec=cc.p(0,0),this.stickGo=!1},setTouchListener:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:function(i,e){t.getStickStatus(i),t.touchLocalX<60&&t.touchLocalY<60&&(t.stickGo=!0,t.changeStickStatus())},onTouchesMoved:function(i,e){t.node.setPosition(t.originPos.x,t.originPos.y),t.getStickStatus(i),1==t.stickGo&&t.changeStickStatus()},onTouchesEnded:function(i,e){t.node.setPosition(t.originPos.x,t.originPos.y),t.touchLocalX=0,t.touchLocalY=0,t.stickGo=!1,t.sendEvent()}},t.node)},getStickStatus:function(t){var i=t[0].getLocation(),e=this.node.convertToNodeSpace(i);this.touchLocalX=e.x-this.stickSize.width/2,this.touchLocalY=e.y-this.stickSize.height/2,this.stickDistance=cc.pDistance(cc.p(this.touchLocalX,this.touchLocalY),cc.p(0,0)),this.ratio=this.moveRadius/this.stickDistance},changeStickStatus:function(){this.stickDistance<=this.moveRadius?(this.node.setPositionX(this.originPos.x+this.touchLocalX),this.node.setPositionY(this.originPos.y+this.touchLocalY)):(this.node.setPositionX(this.originPos.x+this.touchLocalX*this.ratio),this.node.setPositionY(this.originPos.y+this.touchLocalY*this.ratio)),this.sendEvent()},sendEvent:function(){this.moveVec=this.returnMyCommands(),this.node.emit("VirtualStick",{moveVector:this.moveVec})},start:function(){},update:function(t){},returnMyCommands:function(){var t=this.touchLocalX*this.ratio,i=this.touchLocalY*this.ratio;return cc.p(t,i)}}),cc._RF.pop()},{}],Player:[function(t,i,e){"use strict";cc._RF.push(i,"ed047WLG2hBQqS5U5CNp17T","Player"),cc.Class({extends:cc.Component,properties:{screenWidth:0,jumpHeight:0,jumpDuration:0,maxMoveSpeed:0,acceleration:0,jumpAudio:{default:null,url:cc.AudioClip},joyStick:{default:null,type:cc.Node}},setJumpAction:function(){var t=cc.p(0,this.jumpHeight),i=cc.p(0,-this.jumpHeight),e=cc.moveBy(this.jumpDuration,t).easing(cc.easeCubicActionOut()),o=cc.moveBy(this.jumpDuration,i).easing(cc.easeCubicActionIn()),c=cc.callFunc(this.playJumpSound,this);return cc.repeatForever(cc.sequence(e,o,c))},playJumpSound:function(){cc.audioEngine.play(this.jumpAudio,!1)},setInputControl:function(){var t=this;this.joyStick.on("VirtualStick",function(i){i.detail.moveVector.x<0?(t.accLeft=!0,t.accRight=!1):i.detail.moveVector.x>0?(t.accLeft=!1,t.accRight=!0):(t.accLeft=!1,t.accRight=!1)})},onLoad:function(){this.node.runAction(this.setJumpAction()),this.accLeft=!1,this.accRight=!1,this.xSpeed=0,this.setInputControl()},start:function(){},update:function(t){this.accLeft?this.xSpeed-=this.acceleration*t:this.accRight&&(this.xSpeed+=this.acceleration*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*t}}),cc._RF.pop()},{}],Star:[function(t,i,e){"use strict";cc._RF.push(i,"648f3/1t6ROkYcvnRj5oGEu","Star"),cc.Class({extends:cc.Component,properties:{pickRadius:0},onLoad:function(){},getPlayerDistance:function(){var t=this.game.player.getPosition();return cc.pDistance(this.node.position,t)},onPicked:function(){this.game.spawnNewStar(),this.game.gainScore(),this.node.destroy()},start:function(){},update:function(t){if(this.getPlayerDistance()<this.pickRadius)this.onPicked();else{var i=1-this.game.timer/this.game.starDuration;this.node.opacity=50+Math.floor(205*i)}}}),cc._RF.pop()},{}]},{},["Game","JoyStick","Player","Star"]);